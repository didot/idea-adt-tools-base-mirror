task build {}

cmake {
    name 'tools'
    abis 'host'
    projectDir "$rootDir/native"
    targets 'protoc', 'grpc_cpp_plugin'
}

cmake {
    name 'perfd'
    abis 'armeabi-v7a', 'arm64-v8a', 'host'
    projectDir "$rootDir/native"
    flags "-DHOST_BUILD_DIR=$buildDir/tools/out/host"
}
prePerfd.dependsOn tools

// Linking "perfd" to "build" will trigger it's build from IntelliJ, we don't want to do that just yet
// build.dependsOn perfd
